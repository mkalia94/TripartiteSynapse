#!/bin/bash
declare -A ECSsizes
ECSsizes=( ["-s"]="SmallECS")
#           ["-m"]="MedECS"
#            ["-b"]="BigECS")

declare -A Experiments
Experiments=(
    # ["pED_IClGblock"]="--tstart 20 --tend 50 --perc 0.5  --tfinal 80 --block {\"IClG\":[20,50]} --save {\"ClCi\":\"full\"}"
	         # ["pED_IKGblock"]="--tstart 20 --tend 50 --perc 0.5 --block {\"IKG\":[20,50]} --tfinal 80 --save {\"KCi\":\"full\"}"	
	         # ["pED_INaGblock"]="--tstart 20 --tend 50 --perc 0.5 --block {\"INaG\":[20,50]} --tfinal 80 --save save {\"NaCi\":\"full\"}"
             # ["pED_INCXiblock"]="--tstart 20 --tend 50 --perc 0.5 --block {\"INCXi\":[20,50]} --tfinal 80 save {\"CaCi\":\"full\",\"NaCi\":\"full\"}"
             # ["pED_INCXgGblock"]="--tstart 20 --tend 50 --perc 0.5 --block {\"INCXg\":[20,50]} --tfinal 80 --save {\"CaCg\":\"full\",\"NaCg\":\"full\"}"
             # ["pED_JKClblock"]="--tstart 20 --tend 50 --perc 0.5 --block {\"JKCl\":[20,50]} --tfinal 80 --save {\"ClCi\":\"full\"}"
             #["pED_GLTgblock"]="--tstart 20 --tend 50 --perc 0.5 --block {\"fGLTg\":[20,50]} --tfinal 80"
             # ["pED_NKCC1block"]="--tstart 20 --tend 50 --perc 0.5 --block {\"fNKCC1\":[20,50]} --tfinal 80"
       	     # ["Calibration"]="--tstart 20 --tend 30 --perc 0.0 --tfinal 100"
                 # ["HyperNKA"]="--pumpScaleAst 2 --pumpScaleNeuron 2 --tstart 20 --tend 30 --tfinal 120"
	         # ["HyperNKAhalfx"]="--pumpScaleAst 1.8 --pumpScaleNeuron 1.8 --tstart 20 --tend 45 --tfinal 120" 
	         # ["HyperNKA3x"]="--pumpScaleAst 3 --pumpScaleNeuron 3 --tstart 20 --tend 35 --tfinal 120"
                 # ["HyperNKA3xlonger"]="--pumpScaleAst 3 --pumpScaleNeuron 3 --tstart 20 --tend 45  --tfinal 120"
    ["Calibrate1"]="--tstart 20 --tend 22 --tfinal 50 --perc 0.3 --trec 40 --alphae0 0.9"
    ["Calibrate2"]="--tstart 20 --tend 22.2 --tfinal 50 --perc 0.3  --trec 40 --alphae0 0.9"
    ["Calibrate3"]="--tstart 20 --tend 22.4 --tfinal 50 --perc 0.3  --trec 40 --alphae0 0.9"
    ["Calibrate4"]="--tstart 20 --tend 22.6 --tfinal 50 --perc 0.3  --trec 40 --alphae0 0.9"
    ["Calibrate5"]="--tstart 20 --tend 22.8 --tfinal 50 --perc 0.3  --trec 40 --alphae0 0.9")
    # ["HealthyResponse2x"]="--tstart 500 --tend 600 --tfinal 3 --gltScale 5e-4  --excite 1 2"
    # ["HealthyResponse3x"]="--tstart 500 --tend 600 --tfinal 3 --gltScale 1e-4  --excite 1 2"
    # ["HealthyResponse4x"]="--tstart 500 --tend 600 --tfinal 3 --gltScale 5e-5  --excite 1 2")
#              ["HealthyResponseShort"]="--tstart 500 --tend 600 --tfinal 2 --excite 0 10"  )
#              ["AstKnockHealthy"]="--tstart 500 --tend 600 --tfinal 30 --excite 0 20 --astblock 10 30"
#              ["UnhealthyResponse"]="--tstart 20 --tend 40 --tfinal 100 --excite 60 80"
#             ["AstKnockUnhealthy"]="--tstart 20 --tend 40 --tfinal 100 --excite 60 80 --astblock 60 100")

# declare -A Intensity
# Intensity=( ["Lev1"]="0.3"
# 	    ["Lev2"]="0.35"
# 	    ["Lev3"]="0.4"
# 	    ["Lev4"]="0.45"
# 	    ["Lev5"]="0.5"
# 	    ["Lev6"]="0.55"
# 	    ["Lev7"]="0.6"
# 	    ["Lev8"]="0.65"
# 	    ["Lev9"]="0.7"
# 	    ["Lev10"]="0.75"
# 	    ["Lev11"]="0.8"
# 	    ["Lev12"]="0.85")

# declare -A Duration
# Duration=( ["2min"]="22.0"
# 	   ["4min"]="24.0"
# 	   ["6min"]="26.0"
# 	   ["8min"]="28.0"
# 	   ["10min"]="30.0")
	    
# for intensity_ in "${!Intensity[@]}"; do
#   for duration_ in "${!Duration[@]}"; do
#     python set_up.py \
#     --gltScale 2 \
#     --name "$intensity_" \
#     --perc ${Intensity[$intensity_]} \
#     -s \
#     --tstart 20 --tend ${Duration[$duration_]} --tfinal 60 \
#     --solve \
#     --write \
#     --plot '{"MemPot":["Vi","Vg"],"Na":["NaCi","NaCg"],"Glu1":["GluCi","GluCg"],"Glu2":["GluCc"],"Ca":["CaCi","CaCc","CaCg"]}' \
#     --titles '{"MemPot":"Membrane potential (in mV)","Na":"$[Na^+]$ (in mM)","W": "Volume (in pL)", "Glu1": "[Glu] (in mM)","Glu2":"[Glu] (in mM)","Ca":"$[Ca^{2+}]$ (in mM)" }' \
#     --saveloc "$intensity_/$duration_"
#   done; 
# done



for name_ in "${!Experiments[@]}"; do
  for size_ in "${!ECSsizes[@]}"; do
    python set_up.py \
    --name "${ECSsizes[$size_]}" \
    ${Experiments[$name_]} \
    --solve \
    --write \
    --plot '{"MemPot":["Vi","Vg"],"Na":["NaCi","NaCg"],"Glu1":["GluCi","GluCg"],"Glu2":["GluCc"],"Ca":["CaCi","CaCc","CaCg"]}' \
    --titles '{"MemPot":"Membrane potential (in mV)","Na":"$[Na^+]$ (in mM)","W": "Volume (in pL)", "Glu1": "[Glu] (in mM)","Glu2":"[Glu] (in mM)","Ca":"$[Ca^{2+}]$ (in mM)" }' \
    --saveloc "$name_/${ECSsizes[$size_]}"
  done; 
done
